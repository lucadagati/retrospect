# SPDX-License-Identifier: Apache-2.0
# Zephyr configuration for Wasmbed application
# Based on working dhcpv4_client sample

# Network stack (from dhcpv4_client - working configuration)
CONFIG_NETWORKING=y
CONFIG_NET_IPV4=y
CONFIG_NET_TCP=y
CONFIG_NET_SOCKETS=y
CONFIG_NET_DHCPV4=y
CONFIG_NET_MGMT=y
CONFIG_NET_MGMT_EVENT=y

# Random number generator (required for network stack)
CONFIG_TEST_RANDOM_GENERATOR=y
CONFIG_ENTROPY_GENERATOR=y

# Logging (from dhcpv4_client - working configuration)
CONFIG_NET_LOG=y
CONFIG_LOG=y
# Note: NOT using CONFIG_LOG_MODE_IMMEDIATE - this might cause issues

# Network shell (useful for debugging)
CONFIG_NET_SHELL=y

# TLS support (for Wasmbed)
CONFIG_MBEDTLS=y
CONFIG_MBEDTLS_BUILTIN=y
CONFIG_MBEDTLS_ENABLE_HEAP=y
CONFIG_NET_SOCKETS_SOCKOPT_TLS=y

# Memory management
CONFIG_HEAP_MEM_POOL_SIZE=8192

# Threading
CONFIG_MULTITHREADING=y
CONFIG_MAIN_STACK_SIZE=2048

# UART for logging
CONFIG_SERIAL=y
CONFIG_UART_INTERRUPT_DRIVEN=y

# Device drivers
CONFIG_GPIO=y
CONFIG_I2C=y
CONFIG_SPI=y

# Disable POSIX API to avoid compilation errors
CONFIG_POSIX_API=n

# Note: NOT disabling MPU - dhcpv4_client works with MPU enabled
# CONFIG_ARM_MPU=n  # Removed - dhcpv4_client works with MPU