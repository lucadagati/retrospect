using sysbus

# Load STM32F4 Discovery platform
mach create "stm32f4-discovery-001"
machine LoadPlatformDescription @platforms/boards/stm32f4_discovery.repl

# Setup serial connection
showAnalyzer sysbus.usart2

# Setup ADC for temperature sensor
sysbus.adc1 TemperatureSensor @ sysbus.adc1 0

# Connect to Wasmbed gateway
connector Connect sysbus.usart2 127.0.0.1:10002

# Start emulation
start
